import{g as S,r as m,V as B,c as N,o as r,w as u,a as l,Q as x,e as V,b as o,an as b,f as p,a1 as d,a2 as h,a3 as C,t as f,a0 as U,h as A,au as M}from"./index-BCEHSGBj.js";import{Q}from"./QForm-Dun49YRB.js";import{Q as L}from"./QMarkupTable-CgVrH0X8.js";import{Q as z}from"./QSpace-BXiu2jDa.js";import{Q as D}from"./QPage-B9wyOFgf.js";const E={class:"row"},F={class:"col-12 col-md-4"},I={class:"col-12 col-md-8 text-right"},j={key:0},G={key:0},T={key:1},X={__name:"Producto",setup(H){const{proxy:v}=S(),k=m([]),g=m([]),_=m(""),s=m(!1),a=m({id:null,nombre:"",precio:"",stock:""});B(()=>{i()});function y(){k.value=g.value.filter(n=>n.nombre.toLowerCase().includes(_.value.toLowerCase()))}function i(){v.$axios.get("/productos").then(n=>{k.value=n.data,g.value=n.data})}function w(){a.value={id:null,nombre:"",precio:"",stock:""},s.value=!0}function P(n){a.value={...n},s.value=!0}function $(){a.value.id?v.$axios.put(`/productos/${a.value.id}`,a.value).then(i):v.$axios.post("/productos",a.value).then(i),s.value=!1}function q(n){v.$axios.delete(`/productos/${n}`).then(i)}return(n,t)=>(r(),N(D,{class:"q-pa-xs"},{default:u(()=>[l(x,{flat:"",bordered:""},{default:u(()=>[l(V,{class:"q-pa-xs"},{default:u(()=>[l(Q,{onSubmit:i},{default:u(()=>[o("div",E,[o("div",F,[l(b,{modelValue:_.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>_.value=e),y],label:"Buscar producto",outlined:"",dense:""},null,8,["modelValue"])]),o("div",I,[l(p,{label:"Agregar",color:"green",icon:"add_circle_outline","no-caps":"",onClick:w})])])]),_:1}),l(L,{"wrap-cells":"",dense:"",flat:"",bordered:""},{default:u(()=>[t[6]||(t[6]=o("thead",null,[o("tr",{class:"text-bold bg-primary text-white"},[o("th",null,"Nombre"),o("th",null,"Combo"),o("th",null,"Precio"),o("th",null,"Stock"),o("th",null,"Acciones")])],-1)),o("tbody",null,[(r(!0),d(h,null,C(k.value,e=>(r(),d("tr",{key:e.id},[o("td",null,f(e.nombre),1),o("td",null,[e.producto_combo.length?(r(),d("ul",j,[(r(!0),d(h,null,C(e.producto_combo,c=>(r(),d("li",{key:c.id},f(c.cantidad)+" x "+f(c.producto_hijo?.nombre),1))),128))])):U("",!0)]),o("td",null,f(e.precio),1),o("td",null,f(e.stock),1),o("td",null,[l(p,{icon:"edit",color:"blue",class:"q-mr-md",size:"10px",dense:"",onClick:c=>P(e)},null,8,["onClick"]),l(p,{icon:"delete",color:"red",size:"10px",dense:"",onClick:c=>q(e.id)},null,8,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1}),l(A,{modelValue:s.value,"onUpdate:modelValue":t[5]||(t[5]=e=>s.value=e)},{default:u(()=>[l(x,null,{default:u(()=>[l(V,{class:"text-h6 q-pb-none row items-center"},{default:u(()=>[a.value.id?(r(),d("div",G,"Editar producto")):(r(),d("div",T,"Agregar producto")),l(z),l(p,{flat:"",dense:"",icon:"close",onClick:t[1]||(t[1]=e=>s.value=!1)})]),_:1}),l(V,null,{default:u(()=>[l(Q,{onSubmit:M($,["prevent"])},{default:u(()=>[l(b,{modelValue:a.value.nombre,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value.nombre=e),label:"Nombre",outlined:"",dense:"",required:"",hint:""},null,8,["modelValue"]),l(b,{modelValue:a.value.precio,"onUpdate:modelValue":t[3]||(t[3]=e=>a.value.precio=e),label:"Precio",type:"number",outlined:"",dense:"",required:"",hint:""},null,8,["modelValue"]),l(b,{modelValue:a.value.stock,"onUpdate:modelValue":t[4]||(t[4]=e=>a.value.stock=e),label:"Stock",type:"number",outlined:"",dense:"",required:"",hint:""},null,8,["modelValue"]),l(p,{label:"Guardar",color:"primary",type:"submit",class:"q-mt-md"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{X as default};
